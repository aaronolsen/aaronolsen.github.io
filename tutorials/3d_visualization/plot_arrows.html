<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<title>3D Visualization - Arrows</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" >
<link rel="shortcut icon" href="../../img/favicon.png"/>
<link href="../../css/stylesheet2.css" rel="stylesheet" type="text/css">

<body>
	<div id='container' class='container'>

		<div id='header' class='header' >
			<div style='position:relative;' >
				<img id='header_image' style='float:right;' src='../../img/headers/Canada Goose.jpg' />
				<div id='header_image_caption' style='color:white' class='header_image_caption' >
					Canada Goose
				</div>
			</div>
		</div>

		<div id='linksidebar' class='linksidebar' >
			<div class='linksidebar_mainlink' >
				<a class='linksidebar_link' href='../../about_me.html'>About me</a>
			</div>
			<div class='linksidebar_mainlink' >
				<a class='linksidebar_link' href='../../current_projects.html'>Current projects</a>
			</div>
			<div class='linksidebar_mainlink' >
				<a class='linksidebar_link' href='../../software.html'>Software</a>
			</div>
			<div class='linksidebar_mainlink' >
				<a class='linksidebar_link' href='../../tutorials/visualization3d.html'>Tutorials</a>
			</div>
			<div class='linksidebar_sublink' >
				<a class='linksidebar_link' href='../../tutorials/visualization3d.html'>3D Visualization</a>
			</div>
			<div class='linksidebar_sub2link' >
				<a class='linksidebar_link' href='../../tutorials/3d_visualization/plot_points.html'>Plotting 3D points (SVG)</a>
			</div>
			<div class='linksidebar_sub2link_u' >
				<a class='linksidebar_link_u' href='../../tutorials/3d_visualization/plot_arrows.html'>Plotting 3D arrows (SVG)</a>
			</div>
			<div class='linksidebar_sub2link' >
				<a class='linksidebar_link' href='../../tutorials/3d_visualization/plot_spheres.html'>Plotting spheres (WebGL)</a>
			</div>
			<div class='linksidebar_sub2link' >
				<a class='linksidebar_link' href='../../tutorials/3d_visualization/plot_mesh.html'>Plotting a mesh (WebGL)</a>
			</div>
			<div class='linksidebar_sublink' >
				<a class='linksidebar_link' href='../../tutorials/morphometrics.html'>Shape analysis</a>
			</div>
			<div class='linksidebar_sublink' >
				<a class='linksidebar_link' href='../../tutorials/motion.html'>Motion analysis</a>
			</div>
			<div class='linksidebar_sublink' >
				<a class='linksidebar_link' href='../../tutorials/mechanisms.html'>Mechanism models</a>
			</div>
			<div class='linksidebar_sublink' >
				<a class='linksidebar_link' href='../../tutorials/stereomorph.html'>StereoMorph User Guide</a>
			</div>
			<div class='linksidebar_sublink' >
				<a class='linksidebar_link' href='../../tutorials/knex/large_u_joint.html'>K'nex models</a>
			</div>
			<div class='linksidebar_mainlink' >
				<a class='linksidebar_link' href='../../contact.html'>Contact</a>
			</div>
			<div class='linksidebar_mainlink' >
				<a class='linksidebar_link' href='../../cv.html'>CV</a>
			</div>
		</div>

		<div id='maincontent' class='maincontent' >

			<div id='pagetrail' class='pagetrail' ><a href="../../about_me.html">home</a>&nbsp;&nbsp;&nbsp;>&nbsp;&nbsp;&nbsp;<a href="../../tutorials/visualization3d.html">tutorials</a>&nbsp;&nbsp;&nbsp;>&nbsp;&nbsp;&nbsp;<a href="../../tutorials/visualization3d.html">3d visualization</a>&nbsp;&nbsp;&nbsp;>&nbsp;&nbsp;&nbsp;plotting 3d arrows (svg)</div>


<div class='maincontentfill'>
<h1>Plotting 3D arrows</h1>

<p>
This tutorial will show you how to plot static and animated 3D arrows using the R package 
svgViewR. The uninterrupted block of code can be found at the <a href="#uninterrupted_code">end 
of this tutorial</a>.
</p><h2>Preliminary steps</h2><p>Make sure that you have 
		<a href="http://rweb.quant.ku.edu/cran/" target="_blank" >R</a> 
		installed on your system (you can find R installation instructions 
		<a href="https://cran.r-project.org" target="_blank" >here</a>).You will also need to <a href='https://www.r-bloggers.com/installing-r-packages/' target='_blank' >install 
		the latest version</a> of the R package 
		<a href='https://CRAN.R-project.org/package=svgViewR' target='_blank' >svgViewR on CRAN</a>.

		<div class="code" ><pre class="code">
<span class="code_comment" ># Install the svgViewR package (if not already installed)</span>
<span class="code_function" >install.packages</span>(<span class="code_quote" >'svgViewR'</span>, dependencies=TRUE)
</pre></div>
		
<h2>Creating an arrow</h2>

<p>Start by loading the svgViewR package into the current R workspace.</p>

<div class="code" ><pre class="code">
<span class="code_comment" ># Load the svgViewR package</span>
<span class="code_function" >library</span>(svgViewR)
</pre></div>

<p>
Create a single arrow. This is specified as a matrix with the first and second 
row of the matrix corresponding to the base and tip of the arrow, respectively.
</p>

<div class="code" ><pre class="code">
<span class="code_comment" >## Create arrow of length 1</span>
arrow <- <span class="code_function" >rbind</span>(<span class="code_function" >rep</span>(<span class="code_numeric" >0</span>,<span class="code_numeric" >3</span>), <span class="code_function" >rep</span>(<span class="code_numeric" >1</span>,<span class="code_numeric" >3</span>))
arrow
     [,<span class="code_numeric" >1</span>] [,<span class="code_numeric" >2</span>] [,<span class="code_numeric" >3</span>]
[<span class="code_numeric" >1</span>,]    <span class="code_numeric" >0</span>    <span class="code_numeric" >0</span>    <span class="code_numeric" >0</span>
[<span class="code_numeric" >2</span>,]    <span class="code_numeric" >1</span>    <span class="code_numeric" >1</span>    <span class="code_numeric" >1</span>
</pre></div>

<p>
Then open a connection to a new svgViewR .html file. All of the shapes that you draw will be 
written to this .html file. At the end you'll be able to open this file in a web browser 
and view the shapes as an interactive visualization. All of the needed code is contained within 
this html file which will allow you to share this file so others can view the visualization 
(they do not even need to have R installed to view it).
</p>

<div class="code" ><pre class="code">
<span class="code_comment" ># Open a connection to .html file</span>
<span class="code_function" >svg.new</span>(file=<span class="code_quote" >'plot_static_arrow.html'</span>)
</pre></div>

<p>
Add the arrow to the plot.
</p>

<div class="code" ><pre class="code">
<span class="code_comment" ># Add arrow</span>
<span class="code_function" >svg.arrows</span>(arrow)
</pre></div>

<p>
Optionally, add a frame around the arrow. This function outputs the limits of the drawn frame. 
To surpress this output from being written to the console send the function's output to 
<span class='in_line_code'>svg_frame</span>.
</p>

<div class="code" ><pre class="code">
<span class="code_comment" ># Add coordinate axis planes around the arrow</span>
svg_frame <- <span class="code_function" >svg.frame</span>(arrow)
</pre></div>

<p>
Close the connection to the .html file. This adds some closing tags that are needed for the 
visualization to work properly.
</p>

<div class="code" ><pre class="code">
<span class="code_comment" ># Close the file connection</span>
<span class="code_function" >svg.close</span>()
</pre></div>

<p>
You can open the <a href='../../viz/tutorials/3d_visualization/plot_static_arrow.html' target='_blank' >resulting 
.html file</a>.
</p>

<a href='../../viz/tutorials/3d_visualization/plot_static_arrow.html' target='_blank' >
	<img height='400px' class='center' style='border:1px black' src='../../img/tutorials/3d_visualization/plot_static_arrow.jpg' />
</a>
<div class='img_caption' >
	Plot of static 3D arrow and bounding coordinate planes.
</div>

<p>
Note that unlike the base R plotting functions you are not required to specify limits for 
the plot region prior to plotting shapes. When you open the .html file the javascript code 
inside the .html file will automatically determine the necessary viewing window dimensions 
so that all the shapes are visible.
</p>

<p>
To rotate the graphic click and drag the cursor while holding down the 'r' key or click on the circle 
arrow icon in the top right corner and then click and drag the cursor. To move the graphic click and 
drag the cursor or click on the intersecting arrows icon in the top right and click and drag the cursor. 
To zoom scroll in and out. To return to the initial orientation of the graphic (or to see 
changes if you re-write the file) refresh the browser.
</p>

<h2>Creating an animated arrow</h2>

<p>
To animate this arrow you just need to convert the matrix into an array, similar to animating 
<a href='plot_points.html' target='_blank' >3D points</a>. 
However, one difference between the <span class='in_line_code'>svg.points</span> function 
and the <span class='in_line_code'>svg.arrows</span> function is that and the <span class='in_line_code'>svg.points</span> can plot 
multiple static or animated points while <span class='in_line_code'>svg.arrows</span> can 
only plot a single static or animated arrow.
</p>

<p>
Set the number of iterations you'd like.
</p>

<div class="code" ><pre class="code">
<span class="code_comment" >## Set number of iterations</span>
n_iter <- <span class="code_numeric" >100</span>
</pre></div>

<p>
Create an array of the arrow at each iteration.
</p>

<div class="code" ><pre class="code">
<span class="code_comment" ># Animate arrows, save into array</span>
arrow_anim <- <span class="code_function" >array</span>(arrow, dim=<span class="code_function" >c</span>(<span class="code_function" >dim</span>(arrow), n_iter))
<span class="code_function" >for</span>(iter in <span class="code_numeric" >0</span>:(n_iter-<span class="code_numeric" >1</span>)){

	<span class="code_comment" ># Translate along vector direction</span>
	tm <- <span class="code_function" >matrix</span>(<span class="code_numeric" >0.1</span>*iter*(arrow[<span class="code_numeric" >2</span>,]-arrow[<span class="code_numeric" >1</span>,]), <span class="code_numeric" >2</span>, <span class="code_numeric" >3</span>, byrow=TRUE)
	
	<span class="code_comment" ># Apply translation</span>
	arrow_anim[, , iter] <- arrow + tm
}
</pre></div>

<p>
This array is a series of 2-row matrices 
specifying the start and end of the arrow at each interval.
</p>

<div class="code" ><pre class="code">
arrow_anim[,,<span class="code_numeric" >1</span>]
     [,<span class="code_numeric" >1</span>] [,<span class="code_numeric" >2</span>] [,<span class="code_numeric" >3</span>]
[<span class="code_numeric" >1</span>,]  <span class="code_numeric" >0.1</span>  <span class="code_numeric" >0.1</span>  <span class="code_numeric" >0.1</span>
[<span class="code_numeric" >2</span>,]  <span class="code_numeric" >1.1</span>  <span class="code_numeric" >1.1</span>  <span class="code_numeric" >1.1</span>
</pre></div>

<p>
Start a new plot file and add the animated arrow to the plot. Optionally, add a frame around 
the animated arrow. Use the <strong>len</strong> parameter to set the arrowhead length since the 
default is not the right size.
</p>

<div class="code" ><pre class="code">
<span class="code_comment" ># Open a connection to .html file</span>
<span class="code_function" >svg.new</span>(file=<span class="code_quote" >'plot_animated_arrow.html'</span>)

<span class="code_comment" ># Plot arrows, set arrowhead length</span>
<span class="code_function" >svg.arrows</span>(arrow_anim, len=<span class="code_numeric" >0.5</span>)

<span class="code_comment" ># Add coordinate axis planes around the points</span>
svg_frame <- <span class="code_function" >svg.frame</span>(arrow_anim)

<span class="code_comment" ># Close the file connection</span>
<span class="code_function" >svg.close</span>()
</pre></div>

<p>
You can open the <a href='../../viz/tutorials/3d_visualization/plot_animated_arrow.html' target='_blank' >resulting 
.html file</a>.
</p>

<a href='../../viz/tutorials/3d_visualization/plot_animated_arrow.html' target='_blank' >
<video style='display: block;margin: 0 auto; width: 400px;' poster='../../img/tutorials/3d_visualization/plot_animated_arrow.jpg' controls>
  <source src='../../viz/tutorials/3d_visualization/plot_animated_arrow.mp4' type='video/mp4'>
Your browser does not support the video tag.
</video>
</a>
<div class='img_caption' >
	Plot of animated 3D arrow and bounding coordinate planes.
</div>


<h2>Creating multiple arrows</h2>

<p>
To create multiple arrows you'll have to call <span class='in_line_code'>svg.arrows</span> 
for each arrow. Set the number of arrows you'd like to draw.
</p>

<div class="code" ><pre class="code">
<span class="code_comment" >## Set number of arrows</span>
n_arrows <- <span class="code_numeric" >100</span>
</pre></div>

<p>
Use a normal distribution to set randomly oriented arrows radiating from the origin.
</p>

<div class="code" ><pre class="code">
<span class="code_comment" ># Create randomly oriented arrows</span>
arrowm <- <span class="code_function" >list</span>()
<span class="code_function" >for</span>(i in <span class="code_numeric" >1</span>:n_arrows) arrowm[[i]] <- <span class="code_function" >rbind</span>(<span class="code_function" >rep</span>(<span class="code_numeric" >0</span>,<span class="code_numeric" >3</span>), uvector_svg(<span class="code_function" >rnorm</span>(<span class="code_numeric" >3</span>)))
</pre></div>

<p>
Optionally, if you'd like to draw a coordinate frame around the arrows, get the xyz-coordinate ranges.
</p>

<div class="code" ><pre class="code">
<span class="code_comment" ># Get range</span>
arrow_range <- <span class="code_function" >apply</span>(<span class="code_function" >matrix</span>(<span class="code_function" >unlist</span>(arrowm), ncol=<span class="code_numeric" >3</span>, byrow=TRUE), <span class="code_numeric" >2</span>, <span class="code_quote" >'range'</span>, na.rm=TRUE)
</pre></div>

<p>
Start a new plot file and add each arrow to the plot, optionally adding a frame around 
the arrows.
</p>

<div class="code" ><pre class="code">
<span class="code_comment" ># Open a connection to .html file</span>
<span class="code_function" >svg.new</span>(file=<span class="code_quote" >'plot_static_arrows.html'</span>)

<span class="code_comment" ># Plot arrows</span>
<span class="code_function" >for</span>(i in <span class="code_numeric" >1</span>:n_arrows) <span class="code_function" >svg.arrows</span>(arrowm[[i]])

<span class="code_comment" ># Add coordinate axis planes around the points</span>
svg_frame <- <span class="code_function" >svg.frame</span>(arrow_range)

<span class="code_comment" ># Close the file connection</span>
<span class="code_function" >svg.close</span>()
</pre></div>

<p>
You can open the <a href='../../viz/tutorials/3d_visualization/plot_static_arrows.html' target='_blank' >resulting 
.html file</a>.
</p>

<a href='../../viz/tutorials/3d_visualization/plot_static_arrows.html' target='_blank' >
	<img height='400px' class='center' style='border:1px black' src='../../img/tutorials/3d_visualization/plot_static_arrows.jpg' />
</a>
<div class='img_caption' >
	Plot of static 3D arrows and bounding coordinate planes.
</div>


<h2>Creating multiple animated arrows</h2>

<p>
To demonstrate how to plot multiple moving arrows we'll animate the randomly oriented arrows 
so that they "shoot" outward from the origin.
</p>

<p>
Create a list of arrows, with each list element as an array of arrow start and end coordinates 
at each iteration. In the previous example (multiple static arrows) each list element was a 
matrix so we're effectively converting each "arrow matrix" into an "arrow array".
</p>

<div class="code" ><pre class="code">
<span class="code_comment" >## Animate arrows</span>
arrowm_anim <- <span class="code_function" >list</span>()
<span class="code_function" >for</span>(i in <span class="code_numeric" >1</span>:<span class="code_function" >length</span>(arrowm)){

	<span class="code_comment" ># Create array</span>
	arrowm_anim[[i]] <- <span class="code_function" >array</span>(NA, dim=<span class="code_function" >c</span>(<span class="code_function" >dim</span>(arrowm[[i]]), n_iter))

	<span class="code_comment" ># Apply transformation at each iteration</span>
	<span class="code_function" >for</span>(iter in <span class="code_numeric" >0</span>:(n_iter-<span class="code_numeric" >1</span>)){
		
		<span class="code_comment" ># Translate along vector direction (outward from the origin)</span>
		tm <- <span class="code_function" >matrix</span>(<span class="code_numeric" >0.05</span>*iter*(arrowm[[i]][<span class="code_numeric" >2</span>,]-arrowm[[i]][<span class="code_numeric" >1</span>,]), <span class="code_numeric" >2</span>, <span class="code_numeric" >3</span>, byrow=TRUE)

		<span class="code_comment" ># Apply translation</span>
		arrowm_anim[[i]][, , iter] <- arrowm[[i]] + tm
	}
}
</pre></div>

<p>
At each iteration, each arrow is translated outward from the origin along its orientation. The 
translation distance is based on the current iteration number.
</p>

<p>
To draw a coordinate frame around the arrows get the xyz-coordinate ranges.
</p>

<div class="code" ><pre class="code">
<span class="code_comment" ># Get range</span>
arrow_range <- <span class="code_function" >apply</span>(<span class="code_function" >matrix</span>(<span class="code_function" >unlist</span>(arrowm_anim), ncol=<span class="code_numeric" >3</span>, byrow=TRUE), <span class="code_numeric" >2</span>, <span class="code_quote" >'range'</span>, na.rm=TRUE)
</pre></div>

<p>
Start a new plot file and add each animated arrow, optionally adding a frame around 
the arrows. Use the <strong>len</strong> parameter to set the arrowhead length since the 
default is not the right size.
</p>

<div class="code" ><pre class="code">
<span class="code_comment" ># Open a connection to .html file</span>
<span class="code_function" >svg.new</span>(file=<span class="code_quote" >'plot_animated_arrows.html'</span>)

<span class="code_comment" ># Plot arrows</span>
<span class="code_function" >for</span>(i in <span class="code_numeric" >1</span>:<span class="code_function" >length</span>(arrowm_anim)) <span class="code_function" >svg.arrows</span>(arrowm_anim[[i]], len=<span class="code_numeric" >0.3</span>)

<span class="code_comment" ># Add coordinate axis planes around the points</span>
svg_frame <- <span class="code_function" >svg.frame</span>(arrow_range)

<span class="code_comment" ># Close the file connection</span>
<span class="code_function" >svg.close</span>()
</pre></div>

<p>
You can open the <a href='../../viz/tutorials/3d_visualization/plot_animated_arrows.html' target='_blank' >resulting 
.html file</a>.
</p>

<a href='../../viz/tutorials/3d_visualization/plot_animated_arrows.html' target='_blank' >
<video style='display: block;margin: 0 auto; width: 400px;' poster='../../img/tutorials/3d_visualization/plot_animated_arrows.jpg' controls>
  <source src='../../viz/tutorials/3d_visualization/plot_animated_arrows.mp4' type='video/mp4'>
Your browser does not support the video tag.
</video>
</a>
<div class='img_caption' >
	Plot of animated 3D arrows and bounding coordinate planes.
</div>

</div><h2>Uninterrupted code</h2><a name="uninterrupted_code" ></a><br /><div class="code" ><pre class="code">
<span class="code_comment" ># Load the svgViewR package</span>
<span class="code_function" >library</span>(svgViewR)

<span class="code_comment" >## Create arrow of length 1</span>
arrow <- <span class="code_function" >rbind</span>(<span class="code_function" >rep</span>(<span class="code_numeric" >0</span>,<span class="code_numeric" >3</span>), <span class="code_function" >rep</span>(<span class="code_numeric" >1</span>,<span class="code_numeric" >3</span>))
arrow
     [,<span class="code_numeric" >1</span>] [,<span class="code_numeric" >2</span>] [,<span class="code_numeric" >3</span>]
[<span class="code_numeric" >1</span>,]    <span class="code_numeric" >0</span>    <span class="code_numeric" >0</span>    <span class="code_numeric" >0</span>
[<span class="code_numeric" >2</span>,]    <span class="code_numeric" >1</span>    <span class="code_numeric" >1</span>    <span class="code_numeric" >1</span>

<span class="code_comment" ># Open a connection to .html file</span>
<span class="code_function" >svg.new</span>(file=<span class="code_quote" >'plot_static_arrow.html'</span>)

<span class="code_comment" ># Add arrow</span>
<span class="code_function" >svg.arrows</span>(arrow)

<span class="code_comment" ># Add coordinate axis planes around the arrow</span>
svg_frame <- <span class="code_function" >svg.frame</span>(arrow)

<span class="code_comment" ># Close the file connection</span>
<span class="code_function" >svg.close</span>()

<span class="code_comment" >## Set number of iterations</span>
n_iter <- <span class="code_numeric" >100</span>

<span class="code_comment" ># Animate arrows, save into array</span>
arrow_anim <- <span class="code_function" >array</span>(arrow, dim=<span class="code_function" >c</span>(<span class="code_function" >dim</span>(arrow), n_iter))
<span class="code_function" >for</span>(iter in <span class="code_numeric" >0</span>:(n_iter-<span class="code_numeric" >1</span>)){

	<span class="code_comment" ># Translate along vector direction</span>
	tm <- <span class="code_function" >matrix</span>(<span class="code_numeric" >0.1</span>*iter*(arrow[<span class="code_numeric" >2</span>,]-arrow[<span class="code_numeric" >1</span>,]), <span class="code_numeric" >2</span>, <span class="code_numeric" >3</span>, byrow=TRUE)
	
	<span class="code_comment" ># Apply translation</span>
	arrow_anim[, , iter] <- arrow + tm
}

arrow_anim[,,<span class="code_numeric" >1</span>]
     [,<span class="code_numeric" >1</span>] [,<span class="code_numeric" >2</span>] [,<span class="code_numeric" >3</span>]
[<span class="code_numeric" >1</span>,]  <span class="code_numeric" >0.1</span>  <span class="code_numeric" >0.1</span>  <span class="code_numeric" >0.1</span>
[<span class="code_numeric" >2</span>,]  <span class="code_numeric" >1.1</span>  <span class="code_numeric" >1.1</span>  <span class="code_numeric" >1.1</span>

<span class="code_comment" ># Open a connection to .html file</span>
<span class="code_function" >svg.new</span>(file=<span class="code_quote" >'plot_animated_arrow.html'</span>)

<span class="code_comment" ># Plot arrows, set arrowhead length</span>
<span class="code_function" >svg.arrows</span>(arrow_anim, len=<span class="code_numeric" >0.5</span>)

<span class="code_comment" ># Add coordinate axis planes around the points</span>
svg_frame <- <span class="code_function" >svg.frame</span>(arrow_anim)

<span class="code_comment" ># Close the file connection</span>
<span class="code_function" >svg.close</span>()

<span class="code_comment" >## Set number of arrows</span>
n_arrows <- <span class="code_numeric" >100</span>

<span class="code_comment" ># Create randomly oriented arrows</span>
arrowm <- <span class="code_function" >list</span>()
<span class="code_function" >for</span>(i in <span class="code_numeric" >1</span>:n_arrows) arrowm[[i]] <- <span class="code_function" >rbind</span>(<span class="code_function" >rep</span>(<span class="code_numeric" >0</span>,<span class="code_numeric" >3</span>), uvector_svg(<span class="code_function" >rnorm</span>(<span class="code_numeric" >3</span>)))

<span class="code_comment" ># Get range</span>
arrow_range <- <span class="code_function" >apply</span>(<span class="code_function" >matrix</span>(<span class="code_function" >unlist</span>(arrowm), ncol=<span class="code_numeric" >3</span>, byrow=TRUE), <span class="code_numeric" >2</span>, <span class="code_quote" >'range'</span>, na.rm=TRUE)

<span class="code_comment" ># Open a connection to .html file</span>
<span class="code_function" >svg.new</span>(file=<span class="code_quote" >'plot_static_arrows.html'</span>)

<span class="code_comment" ># Plot arrows</span>
<span class="code_function" >for</span>(i in <span class="code_numeric" >1</span>:n_arrows) <span class="code_function" >svg.arrows</span>(arrowm[[i]])

<span class="code_comment" ># Add coordinate axis planes around the points</span>
svg_frame <- <span class="code_function" >svg.frame</span>(arrow_range)

<span class="code_comment" ># Close the file connection</span>
<span class="code_function" >svg.close</span>()

<span class="code_comment" >## Animate arrows</span>
arrowm_anim <- <span class="code_function" >list</span>()
<span class="code_function" >for</span>(i in <span class="code_numeric" >1</span>:<span class="code_function" >length</span>(arrowm)){

	<span class="code_comment" ># Create array</span>
	arrowm_anim[[i]] <- <span class="code_function" >array</span>(NA, dim=<span class="code_function" >c</span>(<span class="code_function" >dim</span>(arrowm[[i]]), n_iter))

	<span class="code_comment" ># Apply transformation at each iteration</span>
	<span class="code_function" >for</span>(iter in <span class="code_numeric" >0</span>:(n_iter-<span class="code_numeric" >1</span>)){
		
		<span class="code_comment" ># Translate along vector direction (outward from the origin)</span>
		tm <- <span class="code_function" >matrix</span>(<span class="code_numeric" >0.05</span>*iter*(arrowm[[i]][<span class="code_numeric" >2</span>,]-arrowm[[i]][<span class="code_numeric" >1</span>,]), <span class="code_numeric" >2</span>, <span class="code_numeric" >3</span>, byrow=TRUE)

		<span class="code_comment" ># Apply translation</span>
		arrowm_anim[[i]][, , iter] <- arrowm[[i]] + tm
	}
}

<span class="code_comment" ># Get range</span>
arrow_range <- <span class="code_function" >apply</span>(<span class="code_function" >matrix</span>(<span class="code_function" >unlist</span>(arrowm_anim), ncol=<span class="code_numeric" >3</span>, byrow=TRUE), <span class="code_numeric" >2</span>, <span class="code_quote" >'range'</span>, na.rm=TRUE)

<span class="code_comment" ># Open a connection to .html file</span>
<span class="code_function" >svg.new</span>(file=<span class="code_quote" >'plot_animated_arrows.html'</span>)

<span class="code_comment" ># Plot arrows</span>
<span class="code_function" >for</span>(i in <span class="code_numeric" >1</span>:<span class="code_function" >length</span>(arrowm_anim)) <span class="code_function" >svg.arrows</span>(arrowm_anim[[i]], len=<span class="code_numeric" >0.3</span>)

<span class="code_comment" ># Add coordinate axis planes around the points</span>
svg_frame <- <span class="code_function" >svg.frame</span>(arrow_range)

<span class="code_comment" ># Close the file connection</span>
<span class="code_function" >svg.close</span>()
</pre></div>
		</div>

		<div id='footer' class='footer' >
			<div style='float:left;' >© 2019 Aaron Olsen. All rights reserved.<br><br></div>
			<div style='float:right;' >Design and photographs by Aaron Olsen.</div>
			<div style='float:left;background-color:;' >The material on this site is based upon work supported by the National Science Foundation (DGE-1144082, DGE-0903637, DBI-1612230). Any opinions, findings, and conclusions or recommendations expressed in this material are those of the author(s) and do not necessarily reflect the views of the National Science Foundation.</div>
		</div>

	</div>

</body>
<script src="../../js/sharedfunctions2.js" type="text/javascript" ></script>